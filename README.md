# VSiM (Vim-based Scrollable infinite Memo)

## はじめに
VSiMは、Vimの操作感をベースにした、無限にスクロールできるメモ・日記アプリです。

※ 現在はプロトタイプ版として、実行ファイルのみを先行公開しています。ソースコードは後日公開予定です。

## インストール方法
右側の「Releases」ページから、お使いのOSに合ったインストーラーをダウンロードし、実行してください。

## 基本操作
基本的な操作は、テキストエディタ「Vim」のキーバインドに準拠しています。

### モードについて
* **Normalモード**
    起動時の状態です。カーソルの移動や、コマンドの入力を行います。
    * `h`, `j`, `k`, `l`: カーソル移動
    * `:`: コマンドモードへ移行

* **Insertモード**
    文字を入力するためのモードです。
    * i, a, o : 入力モードへ切り替え
    * Esc または Ctrl + j : Normalモードに戻る

* **Normalモード**: 起動時の状態。移動やコマンド入力を行います。
    * `i`, `a`, `o`: 入力モードへ移行
    * `Esc` または `Ctrl + j`: Normalモードに戻る
    * 
## コマンド一覧
Normalモードで「:（コロン）」を押すと、以下のコマンドが入力できます。

| コマンド | 短縮 | 機能 | 備考 |
| --- | --- | --- | --- |
| `:write` | `:w` | **保存** | 現在の変更を即座に保存します。（アプリは自動保存も行います） |
| `:quit` | `:q` | **終了** | アプリを終了します。未保存の変更がある場合は保存するか尋ねます。 |
| `:edit` | `:e` | **ファイル移動** | ファイルパレットを開き、指定した日付（ファイル）へジャンプします。未保存時は確認が入ります。 |
| `:open` |  | **ファイル移動** | `:e` と同じ機能です。 |
| `:tag <名前>` | `:t` | **タグ付け** | カーソル位置の段落、または選択範囲を `:::名前` 〜 `:::` で囲みます。 |
| `:limit <行数>` | `:l` | **行数制限設定** | メモリ解放のしきい値（行数）を一時的に変更します。 |
| `:vsplit` | `:vs` | **縦分割** | 画面を左右に分割し、別のファイルを開きます（ファイルパレット起動）。 |
| `:split` | `:sp` | **横分割** | 画面を上下に分割し、別のファイルを開きます。 |
| `:only` | `:on` | **分割解除** | 分割されたウィンドウを閉じ、メインエディタのみに戻します。 |

## 主な機能

### 1. 無限スクロール (Infinite Scroll)
画面の一番上までスクロールすると「前日のメモ」が、一番下までいくと「翌日のメモ」が自動で読み込まれ、結合されます。ページを切り替える手間なく、過去や未来を行き来できます。
ファイル同士の境界線には `--- YYYY-MM-DD.md ---` というヘッダーが表示されます。

### 2. スマートメモリ管理 (Auto Pruning)
アプリの軽快さを保つため、読み込んだデータが設定された行数（Limit）を超えると、画面から一番遠い日付のデータが自動的にメモリから削除されます。
削除されるデータに変更があった場合は、自動的に保存されてからメモリから消えるため、書いた内容が失われることはありません。

現在の状況は、右下のステータスバーに `[Total: 現在行 / 最大行]` として表示されます。

### 3. 安全装置 (Cursor Guard)
編集中（カーソルがある場所）のデータは、自動削除の対象になりません。
もしカーソルがある場所が削除対象になった場合は、処理が一時的に「保留（Pending）」されます。その後、編集作業が終わってカーソルを安全な場所に移動させた瞬間にメモリ整理が実行されます。
書いている途中で勝手に文字が消えることはありませんので、ご安心ください。

### 4. コマンドパレット
`:e` などのコマンドを入力すると、画面中央にパレットが表示されます。ファイル名の一部を入力して絞り込み、Enterキーで素早くジャンプできます。

## その他・Tips
* 現在カーソルがある行は、行番号の代わりに `›` という記号で表示されます。
* 変更があり未保存の場合は、ヘッダーの日付横に `*` マークが付きます。
* アプリを閉じるとき、未保存のデータがあれば「保存して終了しますか？」と確認メッセージが表示されます。

## 免責事項
本アプリは開発中のプロトタイプです。バグもいっぱいありそうです。
使用によって生じたデータの損失や不利益について、開発者は責任を負いかねます。
大切なデータはこまめにバックアップを取ることをおすすめします。
